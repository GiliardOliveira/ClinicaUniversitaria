matrix:
  include:
    - language: node_js
      node_js:
        - "10"

      dist: trusty
      sudo: false

      addons:
        apt:
          sources:
            - google-chrome
          packages:
            - google-chrome-stable
      
      cache:
        directories:
          - ./front/node_modules  

      script:
        - bash ./travis/test_front.sh
      
      before_deploy:
        - cd front

      deploy:
        provider: s3
        access_key_id: $ACESSKEYID
        secret_access_key: $SECRETKEYID
        bucket: $AWSBUCKETFRONT

      deploy:
        provider: codedeploy
        access_key_id: $ACESSKEYID
        secret_access_key: $SECRETKEYID
        provider: codedeploy
        bucket: $AWSBUCKETFRONT
        key: front.zip
        application: $AWSCDAPPLICATIONFRONT
        deployment_group: $AWSCDDEPLOYGROUPFRONT
